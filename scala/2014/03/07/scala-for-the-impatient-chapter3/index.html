<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Yet another tech blog!">

    <title>Solutions to Scala for the Impatient - Chapter3 - George's dream port</title>

    <link rel="canonical" href="http://codethoughts.info/scala/2014/03/07/scala-for-the-impatient-chapter3/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">George's dream port</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Solutions to Scala for the Impatient - Chapter3</h1>
                    
                    <span class="meta">Posted by George's dream port on March 7, 2014</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>In this blog post, I will continue to post the solutions to <a href="http://www.amazon.com/Scala-Impatient-Cay-S-Horstmann/dp/0321774094">Scala for the Impatient</a>, Chapter 3 as book notes, hopes it could help if you’re reading the book too. Without further ado, let’s see the solutions in Scala.</p>

<p>1. Write a code snippet that sets a to an array of n random integers between 0 (inclusive) and n (exclusive).
```scala</p>

<p>import scala.util.Random</p>

<p>def random_arr(n: Int) = {
	Array.fill(n) {Random.nextInt(n)}
}
```
<!--more--></p>

<p>2. Write a loop that swaps adjacent elements of an array of integers. For example, <code>Array(1, 2, 3, 4, 5)</code> becomes <code>Array(2, 1, 4, 3, 5)</code>.
<code>scala
	val arr = Array(1, 2, 3, 4, 5)
	arr.grouped(2).flatMap {
		case Array(x, y) =&gt; Array(y, x)
		case Array(x) =&gt; Array(x)
	}.toArray
</code></p>

<p>3. Repeat the preceding assignment, but produce a new array with the swapped values. Use <code>for/yield</code><sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>.
<code>scala
	val arr = Array(1, 2, 3, 4, 5)
	val new_arr = for (i &lt;- 0 until arr.length) yield {
  	if (i % 2 == 0 &amp;&amp; i &lt; arr.length - 1)
  	arr(i + 1)
  	else if (i % 2 != 0 &amp;&amp; i &gt; 0)
   		arr(i - 1)
  	else
   		arr(i)
   }
</code></p>

<p>4. Given an array of integers, produce a new array that contains all positive values of the original array, in their original order, followed by all values that are zero or negative, in their original order.</p>

<p>There’s a function called <code>partition</code> built-in into Scala by <a href="http://www.scala-lang.org/api/2.10.3/index.html#scala.collection.mutable.ArrayOps">ArrayOps</a> class, below is the implementation via <code>partition</code>:
<code>scala
	val arr = Array(-1, 2, -3, -3.2, -9, 9, 8, 5, -10)
	val p = arr.partition {_ &gt; 0}
	p._1 ++	p._2  // produce Array(2.0, 9.0, 8.0, 5.0, -1.0, -3.0, -3.2, -9.0, -10.0)
</code>
Of course, we can also achieve without using the partition function, let’s do it:</p>

<p><code>scala
	val ta = for (e &lt;- a if e &gt; 0) yield e
	val tb = for (e &lt;- a if e &lt;= 0) yield e
	ta ++ tb // produce: Array(2.0, 9.0, 8.0, 5.0, -1.0, -3.0, -3.2, -9.0, -10.0)
</code></p>

<p>5. How do you compute the average of an <code>Array[Double]</code>?
<code>scala
	val arr = Array(-1, 2, -3, -3.2, -9, 9, 8, 5, -10)
	arr.sum / arr.size
</code>
6. How do you rearrange the elements of an <code>Array[Int]</code> so that they appear in reverse sorted order? How do you do the same with an <code>ArrayBuffer[Int]</code>?</p>

<p>With array, we can sort it in reverse order by below code:
<code>scala
	import scala.util.Sorting
	val arr = Array(-1, 2, -3, -3.2, -9, 9, 8, 5, -10)
	Sorting.quickSort(are)	// Sort the array in place
	arr.reverse
</code></p>

<p>With ArrayBuffer:
<code>scala
	import collection.mutable.ArrayBuffer
	val a = ArrayBuffer(3, 2, 5, 8, 9, -1, -7)
	a.sortWith(_&gt;_)
</code></p>

<p>7. Write a code snippet that produces all values from an array with duplicates removed. (Hint: Look at Scaladoc.)
<code>scala
	val arr = Array(1, 2, -1, 1, 2, 1)
	arr.distinct // produce Array(1, 2, -1)
</code>
8. Rewrite the example at the end of Section 3.4, “Transforming Arrays,” on page 32. Collect indexes of the negative elements, reverse the sequence, drop the last index, and call <code>a.remove(i)</code> for each index. Compare the efficiency of this approach with the two approaches in Section 3.4.</p>

<p>We can get the same result with below code:
```scala
	import collection.mutable.ArrayBuffer</p>

<pre><code>val a = ArrayBuffer(1, 3, 9, -1, -6, 4, -2)
var indexes = for (i &lt;- 0 until a.length if a(i) &lt; 0) yield i
indexes = indexes.reverse
indexes.dropRight(1)
for (i &lt;- 0 until indexes.length) {
	a.remove(indexes(i))
} ``` Now let see the time/space efficiency of above code. First, we use indexes to store the indexes of negative numbers, so it will take O(n) extra space. Then we traverse the original array for two times, reverse the indexes of negative numbers once, so the total time complexity will be 3 * O(n) ~ O(n)
</code></pre>

<p>9. Make a collection of all time zones returned by <code>java.util.TimeZone.getAvailableIDs</code> that are in America. Strip off the “America/” prefix and sort the result.
<code>scala
	val zones = java.util.TimeZone.getAvailableIDs()
	val zones_no_prefix = for (zone &lt;- zones if zone.startsWith("America")) yield zone.stripPrefix("America/")
	util.Sorting.quickSort(zones_no_prefix)
</code>
Another solution more in Scala way:
<code>scala
val zones = java.util.TimeZone.getAvailableIDs
val zones_no_prefix = zones.filter(_.startsWith("America/")).map(_.drop("America/".size))
util.Sorting.quickSort(zones_no_prefix)
</code></p>

<p>10. Import <code>java.awt.datatransfer._</code> and make an object of type <code>SystemFlavorMap</code> with the call <code>val flavors = SystemFlavorMap.getDefaultFlavorMap().asInstanceOf[SystemFlavorMap]</code>, Then call the <code>getNativesForFlavor</code> method with parameter <code>DataFlavor.imageFlavor</code> and get the return value as a Scala buffer. (Why this obscure class? It’s hard to find uses of <code>java.util.List</code> in the standard Java library.)
<code>scala
	val flavMap = SystemFlavorMap.getDefaultFlavorMap().asInstanceOf[SystemFlavorMap]
	val natives = flavMap.getNativesForFlavor(DataFlavor.imageFlavor)
</code></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p><a href="https://bitbucket.org/McDamon/scalaimpatient/src/4a11167459b2/ch03/answers.txt">Scala for the Impatient solutions, by McDamon</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>


                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/ruby/2014/02/24/blocks-procs-lambdas/" data-toggle="tooltip" data-placement="top" title="Differences among Blocks, Procs, and Lambdas in Ruby">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/scala/2014/03/08/scala-for-the-impatient-chapter4/" data-toggle="tooltip" data-placement="top" title="solutions to scala for the impatient - chapter4">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/kui_sun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/puffsun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/puffsun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; George's dream port 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
